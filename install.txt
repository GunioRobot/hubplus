Application setup
-----------------


# create psn user
useradd -m -s /bin/bash psn 

# get python dev
apt-cache search python-dev
sudo apt-get install python-dev git-core curl emacs22-nox python-psycopg2 libxslt1-dev gcc python-imaging


# create directory
cd /
sudo mkdir opt/apphomes
sudo mkdir opt/apphomes/mhpss

cd opt/apphomes
sudo chown -R psn:adm mhpss/ 
cd mhpss 

# become psn user
sudo -i -u psn

# get pinax
git clone git://github.com/pinax/pinax.git

#check the tags available
git-tag -l 

# NOTE that this makes a new branch called mhpss (containing the tag version 0.7beta3
git checkout -b mhpss 0.7beta3

# edit pinax-boot.py --> comment out django 1.0.4 and add 1.1

python scripts/pinax-boot.py --development --django-version=1.1 /opt/apphomes/mhpss/pinax     

source ./pinax-env/bin/activate

git clone git://github.com/thehub/hubplus.git hubplus

cp local_settings_example.py local_settings.py

pip install --requirement src/pinax/requirements/external_apps.txt

git checkout -b mhpss2 0.7beta2


Database setup
--------------



Fulltext indexing
-----------------
HubPlus' fulltext search uses Django-Haystack so in theory you could use lots of different backends but we have chosen to go with the Solr backend since it seems to be the most supported. To install a Solr server on Linux do the following in pinax-env/src:


curl -O http://apache.mirrors.tds.net/lucene/solr/1.3.0/apache-solr-1.3.0.tgz
tar xvzf apache-solr-1.3.0.tgz
cd apache-solr-1.3.0
cd example
java -jar start.jar


** We should make the hubplus start script automatically start this service if it isn't running. **


When installing or revising your schema / search indexes
--------------------------------------------------------

python manage.py build_solr_schema

1. Take the output from that command and place it in apache-solr-1.3.0/example/solr/conf/schema.xml. 
2. Change the line: <schema name="default" version="1.1"> to <schema name="example" version="1.1"> Or to the name of the directory you actually run the start.jar from.
3. Then restart Solr.


To reindex your data
--------------------

python manage.py reindex   

